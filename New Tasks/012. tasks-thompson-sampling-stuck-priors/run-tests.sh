#!/bin/bash
set -e

# First, run the simulation (in case the agent fixed it but didn't run it)
# We trust the agent to run it, but for CI we might want to ensure the file is generated by the *current* code.
# Ideally, the agent runs this manually. The test just checks the output file.
# However, to be robust, let's run the simulation using the agent's code inside the test phase or expect it exists.
# We will rely on the agent following instructions to run `python simulation.py`.
# If the file is missing, the first test fails.

python3 -m pytest -v tests/test_outputs.py